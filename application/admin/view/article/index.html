{extend name="base" /}
{block name="head"}
{/block}
{block name="main"}
<div id="fuyun-app" class="fuyun-app">
  <div class="search-box">
    <div class="fuyun-title">
      <h5>筛选条件</h5>
    </div>
    <div class="search-content">
      <form class="layui-form" action="">
        <div class="fuyun-form-item layui-inline">
          <label>文章分类</label>
          <div class="layui-input-inline">
            <select name="category_id">
                  <option value="-1">全部</option>
                  {$option}
              </select>
          </div>
        </div>
        <div class="fuyun-form-item layui-inline">
          <label>名字</label>
          <div class="layui-input-inline">
            <input type="text" name="title" placeholder="请输入名字" autocomplete="off" class="layui-input" value="<?=Request::instance()->get('title')?>">
          </div>
        </div>
        <div class="fuyun-form-item layui-inline" style="padding-top:18px;">
          <button class="layui-btn layui-btn-normal">搜索</button>
        </div>
      </form>
    </div>
  </div>

  <div class="content-box">
    <div class="fuyun-title">
      <h5>文章列表</h5>
      <a href="{:Url('add')}" class="layui-btn fuyun-add-btn layui-btn-small layui-btn-normal add"><i class="fa fa-plus-square margin-right-5"></i>添加品牌</a>
    </div>
    <div class="main-box">
      <table class="layui-table layui-form">
        <thead>
          <tr>
            <th width="3%"><input type="checkbox" name="" lay-skin="primary" lay-filter="allChoose"></th>
            <th width="10%">标题</th>
            <th width="10%">描述</th>
            <th width="10%">来源</th>
            <th width="10%">状态</th>
            <th width="10%">时间</th>
            <th width="10%">操作</th>
          </tr> 
        </thead>
        <tbody>
          {volist name="list['data']" id="vo"}
            <tr data-id="{$vo.id}">
              <td><input type="checkbox" name="id[]" lay-skin="primary" value="{$vo.id}" ></td>
              <td class='layui-elip'>{$vo.title}</td>
              <td class='layui-elip'>{$vo.describe}</td>
              <td class='layui-elip'>{$vo.source}</td>
              <td class='layui-elip'>显示</td>
              <td class='layui-elip'>
                展现时间：{$vo.create_time}<br/>
                更新时间：{$vo.update_time}<br/>
                创建时间：{$vo.create_time}
              </td>
              <td>
                <div class="layui-btn-group">
                  <a class="layui-btn layui-btn-normal layui-btn-small" href="{:Url('edit')}?id={$vo['id']}">编辑</a>
                  <button class="layui-btn fuyun-btn-del layui-btn-small btn-del-id" data-url="{:Url('deleteAll')}" data-confirm="确定删除该分类吗？" data-successtip="删除成功！" data-id="<?=$vo['id']?>" ><i class="fa fa-close margin-right-5"></i>删除</button>
                </div>
              </td>
            </tr>
          {/volist}
        </tbody>
        <tfoot>
          <tr>
            <th width="2%"><input type="checkbox" name="" lay-skin="primary" lay-filter="allChoose"></th>
            <th colspan="8" class="operator-button" style="text-align:left">
                <button class="layui-btn layui-btn-small fuyun-btn-del btn-del-ids" data-url="{:Url('deleteAll')}" data-confirm="确定要批量删除吗?" data-successtip="批量删除成功!"  method-type="post" style="margin-top:5px"><i class="fa fa-close margin-right-5"></i>批量删除</button>
            </th>
          </tr>
        </tfoot>
      </table>
    </div>
    <div class="page-box">
      <fuyun-page 
        :pagesize="<?=$list['pageSize']?>" 
        :total = "<?=$list['totalRow']?>"
        :current-page = {$list['curPage']}
      ></fuyun-page>
    </div>

  </div>
</div>


<script type="text/javascript">
  layui.use('form', function(){
    var form = layui.form();
    //全选
    form.on('checkbox(allChoose)', function(data){
      var child = $(data.elem).parents('table').find('tbody input[type="checkbox"]');
      child.each(function(index, item){
        item.checked = data.elem.checked;
      });
      form.render('checkbox');
    });
  });

  fuyun.components(['page'],{
    el:"#fuyun-app",
    data:{
      labelPosition: 'top',
    },
  });
</script>
{/block}
